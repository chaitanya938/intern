# Multi-Tenant Notes App - Deployment Guide

## ğŸš€ Quick Deployment

This project is ready for deployment on Render.com with a single command:

```bash
# Windows
deploy.bat

# Linux/Mac
./deploy.sh
```

## ğŸ“‹ Project Structure

```
â”œâ”€â”€ client/                 # React frontend
â”‚   â”œâ”€â”€ src/
â”‚   â”‚   â”œâ”€â”€ components/     # React components
â”‚   â”‚   â”œâ”€â”€ context/        # Auth context
â”‚   â”‚   â””â”€â”€ api/           # API configuration
â”‚   â”œâ”€â”€ build/             # Production build (generated)
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ server/                # Node.js backend
â”‚   â”œâ”€â”€ routes/            # API routes
â”‚   â”œâ”€â”€ models/            # Database models
â”‚   â”œâ”€â”€ middleware/        # Auth middleware
â”‚   â”œâ”€â”€ config/            # Database & environment config
â”‚   â””â”€â”€ package.json
â”œâ”€â”€ render.yaml            # Render deployment configuration
â””â”€â”€ deploy.bat             # Windows deployment script
```

## ğŸ”§ Features

- **Multi-tenant architecture** with tenant isolation
- **Role-based access control** (Admin, User)
- **Subscription management** (Free, Premium, Enterprise)
- **Real-time notes** with CRUD operations
- **User management** for admins
- **Responsive design** with modern UI

## ğŸŒ Deployment on Render

### Prerequisites
1. GitHub repository with your code
2. Render.com account
3. MongoDB Atlas database (already configured)

### Steps

1. **Push to GitHub**
   ```bash
   git add .
   git commit -m "Ready for deployment"
   git push origin main
   ```

2. **Deploy on Render**
   - Go to [Render.com](https://render.com)
   - Click "New +" â†’ "Blueprint"
   - Connect your GitHub repository
   - Render will automatically detect `render.yaml`
   - Click "Apply" to deploy both services

3. **Environment Variables**
   - MongoDB URI: Already configured
   - JWT Secret: Auto-generated by Render
   - API URL: Auto-configured between services

### Service URLs
- **Backend API**: `https://notes-app-backend.onrender.com`
- **Frontend**: `https://notes-app-frontend.onrender.com`

## ğŸ§ª Testing

### Local Testing
```bash
# Start backend
cd server
npm install
npm start

# Start frontend (in new terminal)
cd client
npm install
npm start
```

### Health Check
- Backend: `http://localhost:5000/health`
- Frontend: `http://localhost:3000`

## ğŸ“Š Database Schema

### Users
- `email`, `password`, `role`, `tenant`
- Roles: `admin`, `user`

### Tenants
- `name`, `subscription`, `maxUsers`, `maxNotes`
- Subscriptions: `free`, `premium`, `enterprise`

### Notes
- `title`, `content`, `tenant`, `author`
- Tenant-isolated data

## ğŸ” Authentication

- JWT-based authentication
- Role-based authorization
- Tenant isolation
- Secure password hashing with bcrypt

## ğŸ“± API Endpoints

### Authentication
- `POST /api/auth/register` - User registration
- `POST /api/auth/login` - User login
- `GET /api/auth/me` - Get current user

### Notes
- `GET /api/notes` - Get user's notes
- `POST /api/notes` - Create note
- `PUT /api/notes/:id` - Update note
- `DELETE /api/notes/:id` - Delete note

### Users (Admin only)
- `GET /api/users` - Get all users
- `PUT /api/users/:id` - Update user
- `DELETE /api/users/:id` - Delete user

### Tenants (Admin only)
- `GET /api/tenants` - Get all tenants
- `POST /api/tenants` - Create tenant
- `PUT /api/tenants/:id` - Update tenant

## ğŸ› ï¸ Troubleshooting

### Common Issues

1. **Build Fails**
   - Check Node.js version (14+)
   - Clear npm cache: `npm cache clean --force`
   - Delete node_modules and reinstall

2. **Database Connection**
   - Verify MongoDB URI in environment variables
   - Check network access in MongoDB Atlas

3. **CORS Issues**
   - Backend is configured to allow all origins
   - Check API URL configuration

4. **Authentication Issues**
   - Verify JWT secret is set
   - Check token expiration

### Logs
- Backend logs: Available in Render dashboard
- Frontend logs: Check browser console

## ğŸ“ˆ Performance

- **Frontend**: Optimized React build with code splitting
- **Backend**: Express.js with MongoDB
- **Database**: MongoDB Atlas with connection pooling
- **CDN**: Static assets served via Render's CDN

## ğŸ”„ Updates

To update the deployment:
1. Make changes to your code
2. Push to GitHub
3. Render will automatically redeploy

## ğŸ“ Support

For issues or questions:
1. Check the logs in Render dashboard
2. Verify environment variables
3. Test locally first
4. Check MongoDB Atlas connection

---

**Status**: âœ… Ready for deployment
**Last Updated**: $(date)
**Version**: 1.0.0
